<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>用户表单</title>
<meta
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
	name="viewport">
<link rel="stylesheet" th:href="@{~/plugins/fonts/font-icons.min.css}">
<link rel="stylesheet"
	th:href="@{~/plugins/bootstrap/css/bootstrap.min.css}">
<link rel="stylesheet"
	th:href="@{~/plugins/colorpicker/bootstrap-colorpicker.css}">
<link rel="stylesheet" th:href="@{~/plugins/select2/4.0/select2.css}">
<link rel="stylesheet"
	th:href="@{~/plugins/icheck/1.0/minimal/grey.css}">
<link rel="stylesheet"
	th:href="@{~/plugins/jqGrid/4.7/css/ui.jqgrid.css}">
<link rel="stylesheet"
	th:href="@{~/plugins/adminlte/css/AdminLTE.min.css}">
<link rel="stylesheet" th:href="@{~/plugins/common/jeesite.css}">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
<!-- Google Font -->
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">
</head>
<body class="hold-transition ">
	<div class="wrapper">
		<div class="main-content">
			<div class="box box-main">
				<div class="box-header">
					<div class="box-title">
						<i class="fa icon-social-dropbox"></i> [[ ${user.id ==
						null?"新增用户":"编辑用户"} ]]
					</div>
				</div>
			</div>
			<form id="inputForm" th:action="@{~/sys/user/save}"
				th:object="${user}" method="post" class="form-horizontal">
				<div class="box-body">
					<input type="hidden" id="id" name="id" th:field="*{id}" />
					<div class="form-unit">基本信息</div>
					<div class="row">
						<div class="col-xs-6">
							<div class="form-group">
								<label class="control-label col-sm-4" title=""> <span
									class="required ">*</span> 登录名：<i class="fa icon-question hide"></i></label>
								<div class="col-sm-8">
									<!-- <input type="hidden" id="oldUsername" name="oldUsername" th:value="*{username}" />  -->
									<input type="text" id="username" name="username"
										th:field="*{username}" minlength="2" maxlength="20"
										class="form-control required"
										th:attr="remote='/sys/user/checkUsername?oldUsername='+${user.username}"
										data-msg-remote="登录名已存在！" />
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-6">
							<div class="form-group">
								<label class="control-label col-sm-4" title=""> <span
									class="required ">*</span> 登录密码：<i
									class="fa icon-question hide"></i></label>
								<div class="col-sm-8">

									<input type="text" id="pd" name="pd" th:field="*{pd}"
										minlength="2" maxlength="20" class="form-control required" />
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-6">
							<div class="form-group">
								<label class="control-label col-sm-4" title=""> <span
									class="required ">*</span> 用户姓名：<i
									class="fa icon-question hide"></i></label>
								<div class="col-sm-8">
									<input type="text" id="name" name="name" th:field="*{name}"
										minlength="2" maxlength="20" class="form-control required" />
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-6">
							<div class="form-group">
								<label class="control-label col-sm-4" title=""> <span
									class="required ">*</span> 电话号码：<i
									class="fa icon-question hide"></i></label>
								<div class="col-sm-8">
									<input type="text" id="tel" name="tel" th:field="*{tel}"
										minlength="2" maxlength="20" class="form-control required" />
								</div>
							</div>
						</div>
					</div>

					<div class="box-footer">
						<div class="row">
							<div class="col-sm-offset-2 col-sm-10">
								<button type="submit" class="btn btn-sm btn-primary"
									id="btnSubmit">
									<i class="fa fa-check"></i> 保 存
								</button>
								&nbsp;
								<button type="button" class="btn btn-sm btn-default"
									id="btnCancel" onclick="js.closeCurrentTabPage()">
									<i class="fa fa-reply-all"></i> 关 闭
								</button>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
	<script th:src="@{~/plugins/common/global.js}"></script>
	<script th:src="@{~/plugins/jquery/jquery-1.12.4.min.js}"></script>
	<script th:src="@{~/plugins/jquery/jquery-migrate-1.4.1.min.js}"></script>
	<script th:src="@{~/plugins/jquery-plugins/jquery.form.js}"></script>
	<script th:src="@{~/plugins/bootstrap/js/bootstrap.min.js}"></script>
	<script th:src="@{~/plugins/colorpicker/bootstrap-colorpicker.js}"></script>
	<script th:src="@{~/plugins/select2/4.0/select2.js}"></script>
	<script th:src="@{~/plugins/select2/4.0/i18n/zh_CN.js}"></script>
	<script th:src="@{~/plugins/layer/3.1/layer.js}"></script>
	<script th:src="@{~/plugins/my97/WdatePicker.js}"></script>
	<script th:src="@{~/plugins/jquery-validation/1.16/jquery.validate.js}"></script>
	<script
		th:src="@{~/plugins/jquery-validation/1.16/localization/messages_zh.js}"></script>
	<script
		th:src="@{~/plugins/jquery-validation/1.16/jquery.validate.extend.js}"></script>
	<script th:src="@{~/plugins/jqGrid/4.7/js/jquery.jqGrid.js}"></script>
	<script th:src="@{~/plugins/jqGrid/4.7/js/jquery.jqGrid.extend.js}"></script>
	<script th:src="@{~/plugins/jquery-toastr/2.0/toastr.min.js}"></script>
	<script th:src="@{~/plugins/common/jeesite.js}"></script>
	<script th:src="@{~/plugins/common/i18n/jeesite_zh_CN.js}"></script>

	<script th:inline="javascript">
		$("#inputForm").validate({
			submitHandler : function(form) {
				js.ajaxSubmitForm($(form), function(data) {
					js.showMessage(data.message);
					if (data.result == Global.TRUE) {
						js.closeCurrentTabPage(function(contentWindow) {
							contentWindow.page();
						});
					}
				}, "json");
			}
		});
	</script>

</body>
</html>
